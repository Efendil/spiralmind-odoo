<odoo>
    <!-- list views -->
    <record id="view_shipment_list" model="ir.ui.view">
        <field name="name">shipment.management.list</field>
        <field name="model">shipment.management</field>
        <field name="arch" type="xml">
            <list string="Shipments">
                <field name="reference"/>
                <field name="ref_customer"/>
                <field name="delivery_company_id"/>
                <field name="zip_code"/>
                <field name="total_quantity"/>
                <field name="total_weight"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <record id="view_shipment_management_all_list" model="ir.ui.view">
        <field name="name">shipment.management.list</field>
        <field name="model">shipment.management</field>
        <field name="arch" type="xml">
            <list string="Shipments" editable="bottom" create="false" open_form_view="True">
                <field name="reference" readonly="1"/>
                <button name="action_open_shipment" type="object" icon="fa-external-link" title="Open"/>
                <field name="order_date"/>
                <field name="customer_id"/>
                <field name="ref_customer"/>
                <field name="shipment_type_display"/>
                <field name="delivery_company_id" domain="domain_delivery_company_id"/>
                <field name="loading_time"/>
                <field name="spx_status"
                       decoration-success="spx_status == 'secured'"
                       decoration-danger="spx_status=='unsecured'"/>
                <field name="zip_code"/>
                <field name="city"/>
                <field name="dangerous"/>
                <field name="taillift"/>
                <field name="total_quantity"/>
                <field name="total_weight"/>
                <field name="total_volume"/>
                <field name="total_chargeable_weight"/>
                <field name="state"
                       decoration-success="state == 'confirmed'"
                       decoration-info="state == 'picked'"
                       decoration-primary="state == 'delivered'"
                       decoration-warning="state == 'cancelled'"
                       widget="badge"/>
                <field name="postal_code_code"/>
                <field name="vehicle_id"
                       domain="[('secured', '=', spx_status == 'secured'), ('express', '=', express)]"/>
                <field name="sequence"/>
                <field name="security_measurement" decoration-success="security_measurement"/>
                <field name="handling_agent_id" domain="[('parent_id', '=', customer_id), ('gha', '=', True)]"
                context="{'default_parent_id': customer_id.id, 'default_gha': True, 'default_type':'delivery'}"/>
                <field name="customer_warehouse_id" domain="[('parent_id', '=', customer_id), ('warehouse', '=', True)]"
                context="{'default_parent_id': customer_id, 'default_warehouse': True, 'default_type':'delivery'}"/>

            </list>
        </field>
    </record>

    <!-- Form view -->
    <record id="view_shipment_form" model="ir.ui.view">
        <field name="name">shipment.management.form</field>
        <field name="model">shipment.management</field>
        <field name="arch" type="xml">
            <form string="Shipment">
                <header>
                    <button name="action_confirm" type="object" string="Confirm" invisible="state != 'draft'"/>
                    <button name="action_pick" type="object" string="Picked" invisible="state in ['draft','cancelled'] "/>
                    <button name="action_deliver" type="object" string="Delivered" invisible="state in ['draft','cancelled'] "/>
                    <button name="action_cancel" type="object" string="Cancel" invisible="state in ['draft','cancelled'] "/>
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,confirmed,picked,in_transit,delivered,cancelled"/>
                </header>
                <sheet>
                    <group>
                        <group col="1">
                            <field name="reference" />
                            <field name="entry_date"/>
                            <field name="order_date"/>
                             <field name="customer_id" context="{'show_ref': True}"/>
                            <field name="ref_customer"/>
                            <field name="delivery_company_id" domain="domain_delivery_company_id"/>

                            <div class="o_row">
                                <label for="zip_code" />
                                <field name="zip_code" class="oe_inline"/>
                                <field name="city" readonly="1" class="oe_inline"/>
                            </div>

                            <div class="o_row">
                                <label for="loading_time_from" string="Loading Time " />
                                <field name="loading_time_from" widget="float_time" class="oe_inline"/>
                                <field name="loading_time_to" widget="float_time" class="oe_inline"/>
                            </div>

                        </group>
                        <group>
                            <field name="dangerous" />
                            <field name="taillift" />
                            <field name="express"/>
                            <field name="loading_meter" invisible="not express"/>
                            <field name="vehicle_id"
                                   domain="[('secured', '=', spx_status == 'secured'), ('express', '=', express)]"/>
                        </group>
                    </group>

                    <group>
                        <group invisible="shipment_type != 'export'">
                            <field name="spx_status"/>
                            <field name="security_measurement" invisible="spx_status == 'secured'"/>
                            <field name="direct"/>
                            <field name="handling_agent_id" invisible="not direct"
                            domain="[('parent_id', '=', customer_id), ('gha', '=', True)]"
                            context="{'default_parent_id': customer_id, 'default_gha': True, 'default_type':'delivery'}"/>
                            <field name="customer_warehouse_id" invisible="direct"
                            domain="[('parent_id', '=', customer_id), ('warehouse', '=', True)]"
                            context="{'default_parent_id': customer_id, 'default_warehouse': True, 'default_type':'delivery'}"/>
                            <field name="red_folder_required"/>
                        </group>
                        <group>
                            <field name="total_quantity" readonly="1"/>
                            <field name="total_weight" readonly="1"/>
                            <field name="total_volume" readonly="1"/>
                            <field name="total_chargeable_weight" readonly="1"/>
                            <field name="total_price" readonly="1"/>
                        </group>
                    </group>


                    <notebook>
                        <page string="Shipment Lines">
                            <field name="line_ids">
                                <list editable="bottom">
                                    <field name="quantity"/>
                                    <field name="weight"/>
                                    <field name="volume"/>
                                    <field name="length_cm"/>
                                    <field name="width_cm"/>
                                    <field name="height_cm"/>
                                    <field name="volumetric_weight"/>
                                    <field name="chargeable_weight"/>

                                </list>
                            </field>

                        </page>

                        <page string="Documents">
                            <field name="document_ids" widget="many2many_binary"/>
                            <field name="document_ids" readonly="1">
                                <list>
                                    <field name="name"/>
                                    <field name="mimetype"/>
                                    <field name="create_date"/>
                                </list>
                            </field>
                        </page>
                        <page string="Notes">
                            <field name="notes"/>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="action_shipment_management" model="ir.actions.act_window">
        <field name="name">Shipments (Export/Import)</field>
        <field name="res_model">shipment.management</field>
        <field name="view_mode">list</field>
        <field name="view_ids" eval="[(5,0,0),
                                       (0,0,{'view_mode':'list','view_id':ref('view_shipment_management_all_list')})]"/>

    </record>
</odoo>